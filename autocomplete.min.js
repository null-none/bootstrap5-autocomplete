function Autocomplete(t,e){var i,s;function o(t){let e=document.createElement("div");return e.innerHTML=t,e.firstChild}this.field=t,this.options=Object.assign({},{threshold:2,maximumItems:5,highlightTyped:!0,highlightClass:"text-primary",label:"label",value:"value",showValue:!1,showValueBeforeLabel:!1},e),this.dropdown=null,this.setData=function(t){this.options.data=t,this.renderIfNeeded()},this.renderIfNeeded=function(){let t=this.createItems();return this.createItems()[0]>0?this.dropdown.show():this.field.click(),t},this.createItem=function(t,e){let i;if(this.options.highlightTyped){let s=e.label.toLowerCase().indexOf(t.toLowerCase()),n=Array.isArray(this.options.highlightClass)?this.options.highlightClass.join(" "):"string"==typeof this.options.highlightClass?this.options.highlightClass:"";i=e.label.substring(0,s)+`<span class="${n}">${e.label.substring(s,s+t.length)}</span>`+e.label.substring(s+t.length,e.label.length)}else i=e.label;return this.options.showValue&&(this.options.showValueBeforeLabel?i=`${e.value} ${i}`:i+=` ${e.value}`),o(`<button type="button" class="dropdown-item" data-label="${e.label}" data-value="${e.value}">${i}</button>`)},this.createItems=function(){let t=this.field.value;if(t.length<this.options.threshold)return this.dropdown.hide(),0;let e=this.field.nextSibling;e.innerHTML="";let i=Object.keys(this.options.data),s=0;for(let o=0;o<i.length;o++){let n=i[o],l=this.options.data[n],a={label:this.options.label?l[this.options.label]:n,value:this.options.value?l[this.options.value]:l};if(a.label.toLowerCase().indexOf(t.toLowerCase())>=0&&(e.appendChild(this.createItem(t,a)),this.options.maximumItems>0&&++s>=this.options.maximumItems))break}return this.field.nextSibling.querySelectorAll(".dropdown-item").forEach(t=>{t.addEventListener("click",t=>{let e=t.currentTarget.getAttribute("data-label"),i=t.currentTarget.getAttribute("data-value");this.field.value=e,this.options.onSelectItem&&this.options.onSelectItem({value:i,label:e}),this.dropdown.hide()})}),e.childNodes.length},t.parentNode.classList.add("dropdown"),t.setAttribute("data-bs-toggle","dropdown"),t.classList.add("dropdown-toggle");let n=o('<div class="dropdown-menu"></div>');this.options.dropdownClass&&n.classList.add(this.options.dropdownClass),i=n,(s=t).parentNode.insertBefore(i,s.nextSibling),this.dropdown=new bootstrap.Dropdown(t,this.options.dropdownOptions),t.addEventListener("click",t=>{0===this.createItems()&&(t.stopPropagation(),this.dropdown.hide())}),t.addEventListener("input",()=>{this.options.onInput&&this.options.onInput(this.field.value),this.renderIfNeeded()}),t.addEventListener("keydown",t=>{if(27===t.keyCode){this.dropdown.hide();return}if(40===t.keyCode){this.dropdown._menu.children[0]?.focus();return}})}